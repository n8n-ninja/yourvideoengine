{
  "version": 3,
  "sources": ["../../../src/status.ts"],
  "sourcesContent": ["import { DynamoDBClient, GetItemCommand } from \"@aws-sdk/client-dynamodb\"\n\nconst ddb = new DynamoDBClient({})\nconst JOBS_TABLE = process.env.JOBS_TABLE!\n\nexport const handler = async (event: any) => {\n  const jobId = event.pathParameters?.jobId\n  if (!jobId) {\n    return { statusCode: 400, body: JSON.stringify({ error: \"Missing jobId\" }) }\n  }\n  const res = await ddb.send(\n    new GetItemCommand({\n      TableName: JOBS_TABLE,\n      Key: { jobId: { S: jobId } },\n    }),\n  )\n  if (!res.Item) {\n    return { statusCode: 404, body: JSON.stringify({ error: \"Job not found\" }) }\n  }\n  const status = res.Item.status.S\n  const outputUrl = res.Item.outputUrl?.S\n  const error = res.Item.error?.S\n  return {\n    statusCode: 200,\n    body: JSON.stringify({\n      status,\n      ...(outputUrl ? { outputUrl } : {}),\n      ...(error ? { error } : {}),\n    }),\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAA+C;AAE/C,IAAM,MAAM,IAAI,sCAAe,CAAC,CAAC;AACjC,IAAM,aAAa,QAAQ,IAAI;AAExB,IAAM,UAAU,OAAO,UAAe;AAC3C,QAAM,QAAQ,MAAM,gBAAgB;AACpC,MAAI,CAAC,OAAO;AACV,WAAO,EAAE,YAAY,KAAK,MAAM,KAAK,UAAU,EAAE,OAAO,gBAAgB,CAAC,EAAE;AAAA,EAC7E;AACA,QAAM,MAAM,MAAM,IAAI;AAAA,IACpB,IAAI,sCAAe;AAAA,MACjB,WAAW;AAAA,MACX,KAAK,EAAE,OAAO,EAAE,GAAG,MAAM,EAAE;AAAA,IAC7B,CAAC;AAAA,EACH;AACA,MAAI,CAAC,IAAI,MAAM;AACb,WAAO,EAAE,YAAY,KAAK,MAAM,KAAK,UAAU,EAAE,OAAO,gBAAgB,CAAC,EAAE;AAAA,EAC7E;AACA,QAAM,SAAS,IAAI,KAAK,OAAO;AAC/B,QAAM,YAAY,IAAI,KAAK,WAAW;AACtC,QAAM,QAAQ,IAAI,KAAK,OAAO;AAC9B,SAAO;AAAA,IACL,YAAY;AAAA,IACZ,MAAM,KAAK,UAAU;AAAA,MACnB;AAAA,MACA,GAAI,YAAY,EAAE,UAAU,IAAI,CAAC;AAAA,MACjC,GAAI,QAAQ,EAAE,MAAM,IAAI,CAAC;AAAA,IAC3B,CAAC;AAAA,EACH;AACF;",
  "names": []
}
